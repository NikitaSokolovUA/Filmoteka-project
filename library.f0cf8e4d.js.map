{"mappings":"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","sources":["src/js/library_queued.js","src/templates/renderModalCard.js","src/js/modal-library.js"],"sourcesContent":["import renderFilmCard from './renderCard';\nimport renderNotification from '../templates/renderNotification';\nimport { queuedKeyStorage } from './queued-list';\nimport FilmsPagination from './pagination';\nimport Notiflix from 'notiflix';\nNotiflix.Notify.init({\n  width: '280px',\n  position: 'center-top',\n  distance: '10px',\n  opacity: 1,\n});\n\nconst queuedListBtn = document.querySelector('.queued-btn-js');\nconst watchedListBtn = document.querySelector('.watched-btn-js');\nconst filmList = document.querySelector('.film__list');\nconst filmPagination = document.querySelector('.tui-pagination');\n\nexport function loadQueuedFilms() {\n  filmPagination.innerHTML = '';\n  queuedListBtn.classList.add('active-js');\n  onActiveLoadQueue()\n\n  filmList.innerHTML = '';\n  const queuedFilms = JSON.parse(localStorage.getItem(queuedKeyStorage));\n\n  if (queuedFilms && queuedFilms.length > 0) {\n    renderFilmCard(queuedFilms.slice(0, 20), 'queue');\n\n    const paginator = new FilmsPagination(null, queuedFilms.length);\n    paginator.pagination.on('afterMove', paginatePage);\n    return;\n  } else {\n    filmList.innerHTML = renderNotification();\n    Notiflix.Notify.failure('No films in your queue!');\n    return;\n  }\n}\n\nqueuedListBtn.addEventListener('click', loadQueuedFilms);\n\nfunction paginatePage(event) {\n  const currentPage = event.page;\n  const queuedFilms = JSON.parse(localStorage.getItem(queuedKeyStorage));\n  const films = document.querySelector('.film__list');\n  films.innerHTML = '';\n  const films_array = queuedFilms.slice(\n    currentPage * 20 - 20,\n    currentPage * 20\n  );\n  renderFilmCard(films_array);\n}\n\n\nfunction onActiveLoadQueue() {\n  watchedListBtn.classList.remove('lib-btn__active')\n  queuedListBtn.classList.add('lib-btn__active')\n}","import { isMovieOnList } from '../js/watched-list';\nimport {isMovieOnListQue} from '../js/queued-list'\nconst BASE_URL = 'https://image.tmdb.org/t/p/w500';\n\nexport default function renderModalCard(film, dataAtribute) {\n  const {\n    id,\n    genres,\n    vote_average,\n    vote_count,\n    poster_path,\n    popularity,\n    original_title,\n    overview,\n    title,\n  } = film;\n\n  let watchedBtnText;\n  const watchedBtnAction = isMovieOnList(id);\n  watchedBtnAction === 'add'\n    ? (watchedBtnText = 'add to Watched')\n    : (watchedBtnText = 'delete from watched');\n  \n  let queueBtnText;\n  const queueBtnAction = isMovieOnListQue(id);\n  queueBtnAction === 'add'\n    ? (queueBtnText = 'add to Queued')\n    : (queueBtnText = 'delete from Queued');\n  \n  \n\n  let poster = '';\n  if (poster_path === null) {\n    poster =  `src = \"https://upload.wikimedia.org/wikipedia/commons/4/43/Illustration_of_an_image.png\"`\n    } else poster = `src =\"${BASE_URL}${poster_path}\"`  \n  \n  return `<div class=\"modal__image-container\" id='${id} data='${dataAtribute}'>\n        <img\n          class=\"modal__image\"\n          ${poster}\n          alt=\"Poster ${title}\"\n        />\n      </div>\n    <div class=\"film__info\">\n        <h2 class=\"film__title\">${addAudit(title)}</h2>\n        <ul class=\"film-modal__list\">\n          <li class=\"film__item\">\n            <p class=\"film__details\">Vote / Votes</p>\n            <p class=\"film__value\">\n              <span class=\"film__rating--orange\">${addAudit(\n                vote_average.toFixed(1)\n              )}</span>\n              <span class=\"film__rating--slash\"> / </span>\n              <span class=\"vote-count\">${addAudit(vote_count)}</span>\n            </p>\n          </li>\n          <li class=\"film__item\">\n            <p class=\"film__details\">Popularity</p>\n            <p class=\"film__value\">${addAudit(popularity.toFixed(1))}</p>\n          </li>\n          <li class=\"film__item\">\n            <p class=\"film__details\">Original title</p>\n            <p class=\"film__value\">${addAudit(original_title)}</p>\n          </li>\n          <li class=\"film__item\">\n            <p class=\"film__details\">Genre</p>\n            <p class=\"film__value\">${addAudit(ganresString(genres))}</p>\n          </li>\n        </ul>\n        <div class=\"film-about__wrapper\">\n          <h3 class=\"film-about__title\">About</h3>\n          <div class=\"film-about-text__wrapper\">\n            <p class=\"film-about__text\">\n            ${addAudit(overview)}\n            </p>\n          </div>\n          <div class=\"film-btn__wrapper\">\n            <button class=\"film-button add-watchedbtn-js\" type=\"button\" data-id=\"${id}\" data-action=\"${watchedBtnAction}\" >${watchedBtnText}</button>\n            <button class=\"film-button add-queuedbtn-js\" type=\"button\" data-id=\"${id}\" data-action=\"${queueBtnAction}\" >${queueBtnText}</button>\n          </div>\n        </div>`;\n}\n\nfunction ganresString(id) {\n  return id.map(({ name }) => name).join(', ');\n}\n\nfunction addAudit(string) {\n  if (string.length === 0) {\n    return 'no_info';\n  }\n  return string;\n}\n\n","import renderModalCard from '../templates/renderModalCard';\n// import defaultExport, * as name  from './modal'\nimport {\n  addWatchedBtnListener,\n  removeWatchedBtnListener,\n} from './watched-list';\nimport { loadWatchedFilms } from './library_watched';\nimport { loadQueuedFilms } from './library_queued'\nimport { addQueuedBtnListener, removeQueuedBtnListener } from './queued-list';\n\nconst refs = {\n  modal: document.querySelector('[data-modal]'),\n  closeModalBtn: document.querySelector('[data-modal-close]'),\n  listOfFilm: document.querySelector('.film__list'),\n  card: document.querySelector('.modal__container'),\n  body: document.querySelector('body'),\n};\nlet action = '';\n\nrefs.listOfFilm.addEventListener('click', onClickFilmStorage);\nrefs.closeModalBtn.addEventListener('click', onCloseModal);\nrefs.modal.addEventListener('click', onClickBackdropModalClose);\n\n\n\nconst allFilms = backListFromStorages()\n\nfunction onClickFilmStorage(e) {\n  const chosenFilm = e.target.parentNode.parentNode;\n  action = chosenFilm.dataset.action\n\n  const selectedFilm = allFilms.find(\n    film => film.id === Number(chosenFilm.id)\n  );\n  \n\n   if (chosenFilm.nodeName !== 'LI') {\n    return;\n  }\n\n  refs.card.innerHTML = renderModalCard(selectedFilm);\n  onOpenModal(chosenFilm.dataset.action);\n}\n\nfunction onOpenModal(data) {\n  window.addEventListener('keydown', inKeyDownEscModalClose);\n  refs.modal.classList.toggle('backdrop--is-hidden');\n  refs.body.classList.toggle('modal-open');\n  addWatchedBtnListener();\n  addQueuedBtnListener();\n}\n\nfunction onCloseModal() {\n  window.removeEventListener('keydown', inKeyDownEscModalClose);\n  refs.modal.classList.toggle('backdrop--is-hidden');\n  refs.body.classList.toggle('modal-open');\n  removeWatchedBtnListener();\n  removeQueuedBtnListener();\n  \n  if (action === \"watched\") {\n    loadWatchedFilms();\n  }\n  if (action === \"queue\") {\n    loadQueuedFilms() \n  }\n}\n\nfunction onClickBackdropModalClose(event) {\n  if (event.target === event.currentTarget) {\n    onCloseModal();\n  }\n}\n\nfunction inKeyDownEscModalClose(event) {\n  const KEY_CODE_ESCAPE = 'Escape';\n\n  if (event.code === KEY_CODE_ESCAPE) {\n    onCloseModal();\n  }\n}\n\nfunction backListFromStorages() {\n  const filmsWatched = localStorage.getItem('watchedKey');\n  const filmsQueque = localStorage.getItem('queuedKey');\n  if (filmsWatched && filmsQueque) {\n      \n      const parseWatchedFilms = JSON.parse(filmsWatched);\n      \n      const parseQueQueFilms = JSON.parse(filmsQueque);\n\n    return parseWatchedFilms.concat(parseQueQueFilms)\n  }\n  if (filmsWatched) {\n    return JSON.parse(filmsWatched)\n  }\n  if (filmsQueque) {\n    return JSON.parse(filmsQueque)\n  }\n}"],"names":["$fDIS9","parcelRequire","$parcel$interopDefault","$eWCmQ","Notify","init","width","position","distance","opacity","$36ede8f338f9225a$var$queuedListBtn","document","querySelector","$36ede8f338f9225a$var$watchedListBtn","$36ede8f338f9225a$var$filmList","$36ede8f338f9225a$var$filmPagination","$36ede8f338f9225a$export$7e0bfc0da4c47e91","innerHTML","classList","add","remove","queuedFilms","JSON","parse","localStorage","getItem","$1QVRn","queuedKeyStorage","length","$1HqMK","default","failure","slice","$2nhTy","pagination","on","$36ede8f338f9225a$var$paginatePage","event","currentPage","page","films_array","addEventListener","$02hw8","$da97e4b02241c8f4$export$2e2bcd8739ae039","film","dataAtribute","id","genres","vote_average","vote_count","poster_path","popularity","original_title","overview","title","watchedBtnText","watchedBtnAction","isMovieOnList","queueBtnText","queueBtnAction","isMovieOnListQue","poster","$da97e4b02241c8f4$var$addAudit","toFixed","map","name","join","$da97e4b02241c8f4$var$ganresString","string","$2631b5b1e00936b8$var$refs","modal","closeModalBtn","listOfFilm","card","body","$2631b5b1e00936b8$var$action","e","chosenFilm","target","parentNode","dataset","action","selectedFilm","$2631b5b1e00936b8$var$allFilms","find","Number","nodeName","window","$2631b5b1e00936b8$var$inKeyDownEscModalClose","toggle","addWatchedBtnListener","addQueuedBtnListener","$2631b5b1e00936b8$var$onCloseModal","currentTarget","filmsWatched","filmsQueque","parseWatchedFilms","parseQueQueFilms","concat","$2631b5b1e00936b8$var$backListFromStorages","removeEventListener","removeWatchedBtnListener","removeQueuedBtnListener","$4A24v","loadWatchedFilms","$4Io1N","loadQueuedFilms","code"],"version":3,"file":"library.f0cf8e4d.js.map"}