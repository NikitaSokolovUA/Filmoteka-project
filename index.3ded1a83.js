!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},r=t.parcelRequired7c6;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){a[e]=t},t.parcelRequired7c6=r);var o=r("bpxeT"),i=r("2TvXO"),c=r("3kV53"),s=(r("bpxeT"),r("2TvXO"),r("3kV53"),r("iU1Pc"));o=r("bpxeT"),i=r("2TvXO"),c=r("3kV53");e(s=r("iU1Pc")).Notify.init({width:"280px",position:"center-top",distance:"10px",opacity:1});var d,l=new(0,c.default),u="queuedKey";function f(e){var t=e.target.dataset.id;switch(console.log(e.target),e.target.dataset.action){case"add":!function(e){m.apply(this,arguments)}(t);break;case"remove":!function(e){var t=b(u),n=t.findIndex((function(t){return t.id===Number(e)}));if(-1===n)return;t.splice(n,1),h(u,t)}(t)}}function p(e){var t=b(u);return t?-1===t.findIndex((function(t){return t.id===e}))?"add":"remove":"add"}function m(){return(m=e(o)(e(i).mark((function t(n){var a;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l.id=n,e.next=4,l.requestFilmDetails();case 4:(a=e.sent).genre_ids=a.genres.map((function(e){return e.id})),v(a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),t,null,[[0,9]])})))).apply(this,arguments)}function v(e){var t=b(u);if(t&&0!=t.length)t.push(e),h(u,t,!0);else{var n=[];n.push(e),h(u,n,!0)}}e(s).Notify.init({width:"280px",position:"center-top",distance:"10px",opacity:1,zindex:9999,timeout:1e3});var _,g=function(t,n,a){try{var r=JSON.stringify(n);localStorage.setItem(t,r),1==a?e(s).Notify.success("Your movie has been added to the library"):e(s).Notify.success("Your movie remove from library"),"add"===_.dataset.action?(_.dataset.action="remove",_.textContent="delete from watched"):(_.dataset.action="add",_.textContent="add to Watched")}catch(t){console.error("Set state error: ",t.message),e(s).Notify.failure("Failed to add to library")}},h=function(t,n,a){try{var r=JSON.stringify(n);localStorage.setItem(t,r),1==a?e(s).Notify.success("Your movie has been added to the queued"):e(s).Notify.success("Your movie remove from queued"),"add"===d.dataset.action?(d.dataset.action="remove",d.textContent="delete from queued"):(d.dataset.action="add",d.textContent="add to queued")}catch(t){console.error("Set state error: ",t.message),e(s).Notify.failure("Failed to add to Queue")}},y=function(e){try{var t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error("Get state error: ",e.message)}},b=function(e){try{var t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error("Get state error: ",e.message)}},w=new(0,c.default),x="watchedKey";function k(e){var t=e.target.dataset.id;switch(e.target.dataset.action){case"add":!function(e){N.apply(this,arguments)}(t);break;case"remove":!function(e){var t=y(x),n=t.findIndex((function(t){return t.id===Number(e)}));if(-1===n)return;t.splice(n,1),g(x,t)}(t)}}function N(){return(N=e(o)(e(i).mark((function t(n){var a;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w.id=n,e.next=4,w.requestFilmDetails();case 4:(a=e.sent).genre_ids=a.genres.map((function(e){return e.id})),S(a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),t,null,[[0,9]])})))).apply(this,arguments)}function S(e){var t=y(x);if(t&&0!=t.length)t.push(e),g(x,t,!0);else{var n=[];n.push(e),g(x,n,!0)}}function q(e,t){var n,a,r,o,i=e.id,c=e.genres,s=e.vote_average,d=e.vote_count,l=e.poster_path,u=e.popularity,f=e.original_title,m=e.overview,v=e.title,_=(a=i,(r=y(x))?-1===r.findIndex((function(e){return e.id===a}))?"add":"remove":"add");n="add"===_?"add to Watched":"delete from watched";var g=p(i);o="add"===g?"add to Queued":"delete from Queued";var h="";return h=null===l?'src = "https://upload.wikimedia.org/wikipedia/commons/4/43/Illustration_of_an_image.png"':'src ="'.concat("https://image.tmdb.org/t/p/w500").concat(l,'"'),'<div class="modal__image-container" id=\''.concat(i," data='").concat(t,'\'>\n        <img\n          class="modal__image"\n          ').concat(h,'\n          alt="Poster ').concat(v,'"\n        />\n      </div>\n    <div class="film__info">\n        <h2 class="film__title">').concat(L(v),'</h2>\n        <ul class="film-modal__list">\n          <li class="film__item">\n            <p class="film__details">Vote / Votes</p>\n            <p class="film__value">\n              <span class="film__rating--orange">').concat(L(s.toFixed(1)),'</span>\n              <span class="film__rating--slash"> / </span>\n              <span class="vote-count">').concat(L(d),'</span>\n            </p>\n          </li>\n          <li class="film__item">\n            <p class="film__details">Popularity</p>\n            <p class="film__value">').concat(L(u.toFixed(1)),'</p>\n          </li>\n          <li class="film__item">\n            <p class="film__details">Original title</p>\n            <p class="film__value">').concat(L(f),'</p>\n          </li>\n          <li class="film__item">\n            <p class="film__details">Genre</p>\n            <p class="film__value">').concat(L(function(e){return e.map((function(e){return e.name})).join(", ")}(c)),'</p>\n          </li>\n        </ul>\n        <div class="film-about__wrapper">\n          <h3 class="film-about__title">About</h3>\n          <div class="film-about-text__wrapper">\n            <p class="film-about__text">\n            ').concat(L(m),'\n            </p>\n          </div>\n          <div class="film-btn__wrapper">\n            <button class="film-button add-watchedbtn-js" type="button" data-id="').concat(i,'" data-action="').concat(_,'" >').concat(n,'</button>\n            <button class="film-button add-queuedbtn-js" type="button" data-id="').concat(i,'" data-action="').concat(g,'" >').concat(o,"</button>\n          </div>\n        </div>")}function L(e){return 0===e.length?"no_info":e}s=r("iU1Pc");var O={modal:document.querySelector("[data-modal]"),closeModalBtn:document.querySelector("[data-modal-close]"),listOfFilm:document.querySelector(".film__list"),card:document.querySelector(".modal__container"),body:document.querySelector("body")};function E(){return(E=e(o)(e(i).mark((function t(n){var a,r,o;return e(i).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=n.target.parentNode.parentNode,(r=new(0,c.default)).id=a.id,t.next=6,r.requestFilmDetails();case 6:if(o=t.sent,"LI"===a.nodeName){t.next=9;break}return t.abrupt("return");case 9:O.card.innerHTML=q(o),T(),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),console.error("Set state error: ",t.t0.message),e(s).Notify.failure("Sorry some problems on Server");case 17:case"end":return t.stop()}}),t,null,[[0,13]])})))).apply(this,arguments)}function T(){window.addEventListener("keydown",I),O.modal.classList.toggle("backdrop--is-hidden"),O.body.classList.toggle("modal-open"),(_=document.querySelector(".add-watchedbtn-js")).addEventListener("click",k),(d=document.querySelector(".add-queuedbtn-js")).addEventListener("click",f)}function F(){window.removeEventListener("keydown",I),O.modal.classList.toggle("backdrop--is-hidden"),O.body.classList.toggle("modal-open"),_.removeEventListener("click",k),d.removeEventListener("click",f)}function I(e){"Escape"===e.code&&F()}O.listOfFilm.addEventListener("click",(function(e){return E.apply(this,arguments)})),O.closeModalBtn.addEventListener("click",F),O.modal.addEventListener("click",(function(e){e.target===e.currentTarget&&F()}))}();
//# sourceMappingURL=index.3ded1a83.js.map
