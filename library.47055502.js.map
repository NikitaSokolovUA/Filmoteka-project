{"mappings":"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","sources":["src/js/library_queued.js","src/templates/renderModalCard.js","src/js/modal-library.js"],"sourcesContent":["import renderFilmCard from './renderCard';\nimport renderNotification from '../templates/renderNotification';\nimport { queuedKeyStorage } from './queued-list';\nimport FilmsPagination from './pagination';\nimport Notiflix from 'notiflix';\nNotiflix.Notify.init({\n  width: '280px',\n  position: 'center-top',\n  distance: '10px',\n  opacity: 1,\n});\n\nconst queuedListBtn = document.querySelector('.queued-btn-js');\nconst filmList = document.querySelector('.film__list');\n\nexport function loadQueuedFilms() {\n  queuedListBtn.classList.add('active-js');\n  filmList.innerHTML = '';\n  const queuedFilms = JSON.parse(localStorage.getItem(queuedKeyStorage));\n\n  if (queuedFilms && queuedFilms.length > 0) {\n    renderFilmCard(queuedFilms.slice(0, 20), 'queue');\n\n    const paginator = new FilmsPagination(null, queuedFilms.length);\n    paginator.pagination.on('afterMove', paginatePage);\n    return\n  } else {\n    filmList.innerHTML = renderNotification();\n    Notiflix.Notify.failure('No films in your queue!');\n    return\n  }\n}\n\nqueuedListBtn.addEventListener('click', loadQueuedFilms);\n\nfunction paginatePage(event) {\n  const currentPage = event.page;\n  const queuedFilms = JSON.parse(localStorage.getItem(queuedKeyStorage));\n  const films = document.querySelector('.film__list');\n  films.innerHTML = '';\n  const films_array = queuedFilms.slice(\n    currentPage * 20 - 20,\n    currentPage * 20\n  );\n  renderFilmCard(films_array);\n}\n","import { isMovieOnList } from '../js/watched-list';\nimport {isMovieOnListQue} from '../js/queued-list'\nconst BASE_URL = 'https://image.tmdb.org/t/p/w500';\n\nexport default function renderModalCard(film, dataAtribute) {\n  const {\n    id,\n    genres,\n    vote_average,\n    vote_count,\n    poster_path,\n    popularity,\n    original_title,\n    overview,\n    title,\n  } = film;\n\n  let watchedBtnText;\n  const watchedBtnAction = isMovieOnList(id);\n  watchedBtnAction === 'add'\n    ? (watchedBtnText = 'add to Watched')\n    : (watchedBtnText = 'delete from watched');\n  \n  let queueBtnText;\n  const queueBtnAction = isMovieOnListQue(id);\n  queueBtnAction === 'add'\n    ? (queueBtnText = 'add to Queued')\n    : (queueBtnText = 'delete from Queued');\n  \n  \n\n  let poster = '';\n  if (poster_path === null) {\n    poster =  `src = \"https://upload.wikimedia.org/wikipedia/commons/4/43/Illustration_of_an_image.png\"`\n    } else poster = `src =\"${BASE_URL}${poster_path}\"`  \n  \n  return `<div class=\"modal__image-container\" id='${id} data='${dataAtribute}'>\n        <img\n          class=\"modal__image\"\n          ${poster}\n          alt=\"Poster ${title}\"\n        />\n      </div>\n    <div class=\"film__info\">\n        <h2 class=\"film__title\">${addAudit(title)}</h2>\n        <ul class=\"film-modal__list\">\n          <li class=\"film__item\">\n            <p class=\"film__details\">Vote / Votes</p>\n            <p class=\"film__value\">\n              <span class=\"film__rating--orange\">${addAudit(\n                vote_average.toFixed(1)\n              )}</span>\n              <span class=\"film__rating--slash\"> / </span>\n              <span class=\"vote-count\">${addAudit(vote_count)}</span>\n            </p>\n          </li>\n          <li class=\"film__item\">\n            <p class=\"film__details\">Popularity</p>\n            <p class=\"film__value\">${addAudit(popularity.toFixed(1))}</p>\n          </li>\n          <li class=\"film__item\">\n            <p class=\"film__details\">Original title</p>\n            <p class=\"film__value\">${addAudit(original_title)}</p>\n          </li>\n          <li class=\"film__item\">\n            <p class=\"film__details\">Genre</p>\n            <p class=\"film__value\">${addAudit(ganresString(genres))}</p>\n          </li>\n        </ul>\n        <div class=\"film-about__wrapper\">\n          <h3 class=\"film-about__title\">About</h3>\n          <div class=\"film-about-text__wrapper\">\n            <p class=\"film-about__text\">\n            ${addAudit(overview)}\n            </p>\n          </div>\n          <div class=\"film-btn__wrapper\">\n            <button class=\"film-button add-watchedbtn-js\" type=\"button\" data-id=\"${id}\" data-action=\"${watchedBtnAction}\" >${watchedBtnText}</button>\n            <button class=\"film-button add-queuedbtn-js\" type=\"button\" data-id=\"${id}\" data-action=\"${queueBtnAction}\" >${queueBtnText}</button>\n          </div>\n        </div>`;\n}\n\nfunction ganresString(id) {\n  return id.map(({ name }) => name).join(', ');\n}\n\nfunction addAudit(string) {\n  if (string.length === 0) {\n    return 'no_info';\n  }\n  return string;\n}\n\n","import renderModalCard from '../templates/renderModalCard';\n// import defaultExport, * as name  from './modal'\nimport {\n  addWatchedBtnListener,\n  removeWatchedBtnListener,\n} from './watched-list';\nimport { loadWatchedFilms } from './library_watched';\nimport { loadQueuedFilms } from './library_queued'\nimport { addQueuedBtnListener, removeQueuedBtnListener } from './queued-list';\n\nconst refs = {\n  modal: document.querySelector('[data-modal]'),\n  closeModalBtn: document.querySelector('[data-modal-close]'),\n  listOfFilm: document.querySelector('.film__list'),\n  card: document.querySelector('.modal__container'),\n  body: document.querySelector('body'),\n};\nlet action = '';\n\nrefs.listOfFilm.addEventListener('click', onClickFilmStorage);\nrefs.closeModalBtn.addEventListener('click', onCloseModal);\nrefs.modal.addEventListener('click', onClickBackdropModalClose);\n\n\n\nconst allFilms = backListFromStorages()\n\nfunction onClickFilmStorage(e) {\n  const chosenFilm = e.target.parentNode.parentNode;\n  action = chosenFilm.dataset.action\n\n  const selectedFilm = allFilms.find(\n    film => film.id === Number(chosenFilm.id)\n  );\n  \n\n   if (chosenFilm.nodeName !== 'LI') {\n    return;\n  }\n\n  refs.card.innerHTML = renderModalCard(selectedFilm);\n  onOpenModal(chosenFilm.dataset.action);\n}\n\nfunction onOpenModal(data) {\n  window.addEventListener('keydown', inKeyDownEscModalClose);\n  refs.modal.classList.toggle('backdrop--is-hidden');\n  refs.body.classList.toggle('modal-open');\n  addWatchedBtnListener();\n  addQueuedBtnListener();\n}\n\nfunction onCloseModal() {\n  window.removeEventListener('keydown', inKeyDownEscModalClose);\n  refs.modal.classList.toggle('backdrop--is-hidden');\n  refs.body.classList.toggle('modal-open');\n  removeWatchedBtnListener();\n  removeQueuedBtnListener();\n  \n  if (action === \"watched\") {\n    loadWatchedFilms();\n  }\n  if (action === \"queue\") {\n    loadQueuedFilms() \n  }\n}\n\nfunction onClickBackdropModalClose(event) {\n  if (event.target === event.currentTarget) {\n    onCloseModal();\n  }\n}\n\nfunction inKeyDownEscModalClose(event) {\n  const KEY_CODE_ESCAPE = 'Escape';\n\n  if (event.code === KEY_CODE_ESCAPE) {\n    onCloseModal();\n  }\n}\n\nfunction backListFromStorages() {\n  const filmsWatched = localStorage.getItem('watchedKey');\n  const filmsQueque = localStorage.getItem('queuedKey');\n  if (filmsWatched && filmsQueque) {\n      \n      const parseWatchedFilms = JSON.parse(filmsWatched);\n      \n      const parseQueQueFilms = JSON.parse(filmsQueque);\n\n    return parseWatchedFilms.concat(parseQueQueFilms)\n  }\n  if (filmsWatched) {\n    return JSON.parse(filmsWatched)\n  }\n  if (filmsQueque) {\n    return JSON.parse(filmsQueque)\n  }\n}"],"names":["$5I0aQ","parcelRequire","$parcel$interopDefault","$iU1Pc","Notify","init","width","position","distance","opacity","$92739b5fdbc41b25$var$queuedListBtn","document","querySelector","$92739b5fdbc41b25$var$filmList","$92739b5fdbc41b25$export$7e0bfc0da4c47e91","classList","add","innerHTML","queuedFilms","JSON","parse","localStorage","getItem","$1JUWh","queuedKeyStorage","length","default","slice","$jcFG7","pagination","on","$92739b5fdbc41b25$var$paginatePage","$eDfTE","failure","event","currentPage","page","films_array","addEventListener","$1fiGW","$a31f210fbab52dd8$export$2e2bcd8739ae039","film","dataAtribute","watchedBtnText","queueBtnText","id","genres","vote_average","vote_count","poster_path","popularity","original_title","overview","title","watchedBtnAction","isMovieOnList","queueBtnAction","isMovieOnListQue","poster","concat","$a31f210fbab52dd8$var$addAudit","toFixed","map","param","name","join","$a31f210fbab52dd8$var$ganresString","string","$5274909fd9dfb2b1$var$refs","modal","closeModalBtn","listOfFilm","card","body","$5274909fd9dfb2b1$var$action","e","chosenFilm","target","parentNode","dataset","action","selectedFilm","$5274909fd9dfb2b1$var$allFilms","find","Number","nodeName","window","$5274909fd9dfb2b1$var$inKeyDownEscModalClose","toggle","addWatchedBtnListener","addQueuedBtnListener","$5274909fd9dfb2b1$var$onCloseModal","currentTarget","filmsWatched","filmsQueque","parseWatchedFilms","parseQueQueFilms","$5274909fd9dfb2b1$var$backListFromStorages","removeEventListener","removeWatchedBtnListener","removeQueuedBtnListener","$gaiPd","loadWatchedFilms","$czyCo","loadQueuedFilms","code"],"version":3,"file":"library.47055502.js.map"}