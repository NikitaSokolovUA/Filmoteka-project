{"mappings":"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","sources":["src/templates/renderModalCard.js","src/js/library_queued.js","src/js/modal-library.js"],"sourcesContent":["import { isMovieOnList } from '../js/watched-list';\nimport {isMovieOnListQue} from '../js/queued-list'\nconst BASE_URL = 'https://image.tmdb.org/t/p/w500';\n\nexport default function renderModalCard(film, dataAtribute) {\n  const {\n    id,\n    genres,\n    vote_average,\n    vote_count,\n    poster_path,\n    popularity,\n    original_title,\n    overview,\n    title,\n  } = film;\n\n  let watchedBtnText;\n  const watchedBtnAction = isMovieOnList(id);\n  watchedBtnAction === 'add'\n    ? (watchedBtnText = 'add to Watched')\n    : (watchedBtnText = 'delete from watched');\n  \n  let queueBtnText;\n  const queueBtnAction = isMovieOnListQue(id);\n  queueBtnAction === 'add'\n    ? (queueBtnText = 'add to Queued')\n    : (queueBtnText = 'delete from Queued');\n  \n  \n\n  let poster = '';\n  if (poster_path === null) {\n    poster =  `src = \"https://upload.wikimedia.org/wikipedia/commons/4/43/Illustration_of_an_image.png\"`\n    } else poster = `src =\"${BASE_URL}${poster_path}\"`  \n  \n  return `<div class=\"modal__image-container\" id='${id} data='${dataAtribute}'>\n        <img\n          class=\"modal__image\"\n          ${poster}\n          alt=\"Poster ${title}\"\n        />\n      </div>\n    <div class=\"film__info\">\n        <h2 class=\"film__title\">${addAudit(title)}</h2>\n        <ul class=\"film-modal__list\">\n          <li class=\"film__item\">\n            <p class=\"film__details\">Vote / Votes</p>\n            <p class=\"film__value\">\n              <span class=\"film__rating--orange\">${addAudit(\n                vote_average.toFixed(1)\n              )}</span>\n              <span class=\"film__rating--slash\"> / </span>\n              <span class=\"vote-count\">${addAudit(vote_count)}</span>\n            </p>\n          </li>\n          <li class=\"film__item\">\n            <p class=\"film__details\">Popularity</p>\n            <p class=\"film__value\">${addAudit(popularity.toFixed(1))}</p>\n          </li>\n          <li class=\"film__item\">\n            <p class=\"film__details\">Original title</p>\n            <p class=\"film__value\">${addAudit(original_title)}</p>\n          </li>\n          <li class=\"film__item\">\n            <p class=\"film__details\">Genre</p>\n            <p class=\"film__value\">${addAudit(ganresString(genres))}</p>\n          </li>\n        </ul>\n        <div class=\"film-about__wrapper\">\n          <h3 class=\"film-about__title\">About</h3>\n          <div class=\"film-about-text__wrapper\">\n            <p class=\"film-about__text\">\n            ${addAudit(overview)}\n            </p>\n          </div>\n          <div class=\"film-btn__wrapper\">\n            <button class=\"film-button add-watchedbtn-js\" type=\"button\" data-id=\"${id}\" data-action=\"${watchedBtnAction}\" >${watchedBtnText}</button>\n            <button class=\"film-button add-queuedbtn-js\" type=\"button\" data-id=\"${id}\" data-action=\"${queueBtnAction}\" >${queueBtnText}</button>\n          </div>\n        </div>`;\n}\n\nfunction ganresString(id) {\n  return id.map(({ name }) => name).join(', ');\n}\n\nfunction addAudit(string) {\n  if (string.length === 0) {\n    return 'no_info';\n  }\n  return string;\n}\n\n","import renderFilmCard from './renderCard';\nimport renderNotification from '../templates/renderNotification';\nimport { queuedKeyStorage } from './queued-list';\nimport FilmsPagination from './pagination';\nimport Notiflix from 'notiflix';\nNotiflix.Notify.init({\n  width: '280px',\n  position: 'center-top',\n  distance: '10px',\n  opacity: 1,\n});\n\nconst queuedListBtn = document.querySelector('.queued-btn-js');\nconst filmList = document.querySelector('.film__list');\n\nexport function loadQueuedFilms() {\n  queuedListBtn.classList.add('active-js');\n  filmList.innerHTML = '';\n  const queuedFilms = JSON.parse(localStorage.getItem(queuedKeyStorage));\n\n  if (queuedFilms && queuedFilms.length > 0) {\n    renderFilmCard(queuedFilms.slice(0, 20));\n\n    const paginator = new FilmsPagination(null, queuedFilms.length);\n    paginator.pagination.on('afterMove', paginatePage);\n  } else {\n    filmList.innerHTML = renderNotification();\n    Notiflix.Notify.failure('No films in your queue!');\n  }\n}\n\nqueuedListBtn.addEventListener('click', loadQueuedFilms);\n\nfunction paginatePage(event) {\n  const currentPage = event.page;\n  const queuedFilms = JSON.parse(localStorage.getItem(queuedKeyStorage));\n  const films = document.querySelector('.film__list');\n  films.innerHTML = '';\n  const films_array = queuedFilms.slice(\n    currentPage * 20 - 20,\n    currentPage * 20\n  );\n  renderFilmCard(films_array);\n}\n","import renderModalCard from '../templates/renderModalCard';\n// import defaultExport, * as name  from './modal'\nimport {\n  addWatchedBtnListener,\n  removeWatchedBtnListener,\n} from './watched-list';\nimport { loadWatchedFilms } from './library_watched';\nimport { loadQueuedFilms } from './library_queued'\nimport { addQueuedBtnListener, removeQueuedBtnListener } from './queued-list';\n\nconst refs = {\n  modal: document.querySelector('[data-modal]'),\n  closeModalBtn: document.querySelector('[data-modal-close]'),\n  listOfFilm: document.querySelector('.film__list'),\n  card: document.querySelector('.modal__container'),\n  body: document.querySelector('body'),\n};\nlet action = '';\n\nrefs.listOfFilm.addEventListener('click', onClickFilmStorage);\nrefs.closeModalBtn.addEventListener('click', onCloseModal);\nrefs.modal.addEventListener('click', onClickBackdropModalClose);\n\n\n\nconst allFilms = backListFromStorages()\n\nfunction onClickFilmStorage(e) {\n  const chosenFilm = e.target.parentNode.parentNode;\n  action = chosenFilm.dataset.action\n\n  const selectedFilm = allFilms.find(\n    film => film.id === Number(chosenFilm.id)\n  );\n  \n\n   if (chosenFilm.nodeName !== 'LI') {\n    return;\n  }\n\n  refs.card.innerHTML = renderModalCard(selectedFilm);\n  onOpenModal(chosenFilm.dataset.action);\n}\n\nfunction onOpenModal(data) {\n  window.addEventListener('keydown', inKeyDownEscModalClose);\n  refs.modal.classList.toggle('backdrop--is-hidden');\n  refs.body.classList.toggle('modal-open');\n  addWatchedBtnListener();\n  addQueuedBtnListener();\n}\n\nfunction onCloseModal() {\n  window.removeEventListener('keydown', inKeyDownEscModalClose);\n  refs.modal.classList.toggle('backdrop--is-hidden');\n  refs.body.classList.toggle('modal-open');\n  removeWatchedBtnListener();\n  removeQueuedBtnListener();\n  \n  if (action === \"watched\") {\n    loadWatchedFilms();\n  }\n  if (action === \"queue\") {\n    loadQueuedFilms() \n  }\n}\n\nfunction onClickBackdropModalClose(event) {\n  if (event.target === event.currentTarget) {\n    onCloseModal();\n  }\n}\n\nfunction inKeyDownEscModalClose(event) {\n  const KEY_CODE_ESCAPE = 'Escape';\n\n  if (event.code === KEY_CODE_ESCAPE) {\n    onCloseModal();\n  }\n}\n\nfunction backListFromStorages() {\n  const filmsWatched = localStorage.getItem('watchedKey');\n  const filmsQueque = localStorage.getItem('queuedKey');\n  if (filmsWatched && filmsQueque) {\n      \n      const parseWatchedFilms = JSON.parse(filmsWatched);\n      \n      const parseQueQueFilms = JSON.parse(filmsQueque);\n\n    return parseWatchedFilms.concat(parseQueQueFilms)\n  }\n  if (filmsWatched) {\n    return JSON.parse(filmsWatched)\n  }\n  if (filmsQueque) {\n    return JSON.parse(filmsQueque)\n  }\n}"],"names":["$1fiGW","parcelRequire","$a31f210fbab52dd8$export$2e2bcd8739ae039","film","dataAtribute","watchedBtnText","queueBtnText","id","genres","vote_average","vote_count","poster_path","popularity","original_title","overview","title","watchedBtnAction","isMovieOnList","queueBtnAction","$1JUWh","isMovieOnListQue","poster","concat","$a31f210fbab52dd8$var$addAudit","toFixed","map","param","name","join","$a31f210fbab52dd8$var$ganresString","string","length","$5I0aQ","$parcel$interopDefault","$iU1Pc","Notify","init","width","position","distance","opacity","$92739b5fdbc41b25$var$queuedListBtn","document","querySelector","$92739b5fdbc41b25$var$filmList","$92739b5fdbc41b25$export$7e0bfc0da4c47e91","classList","add","innerHTML","queuedFilms","JSON","parse","localStorage","getItem","queuedKeyStorage","default","slice","$jcFG7","pagination","on","$92739b5fdbc41b25$var$paginatePage","$eDfTE","failure","event","currentPage","page","films_array","addEventListener","$5274909fd9dfb2b1$var$refs","modal","closeModalBtn","listOfFilm","card","body","$5274909fd9dfb2b1$var$action","e","chosenFilm","target","parentNode","dataset","action","selectedFilm","$5274909fd9dfb2b1$var$allFilms","find","Number","nodeName","window","$5274909fd9dfb2b1$var$inKeyDownEscModalClose","toggle","addWatchedBtnListener","addQueuedBtnListener","$5274909fd9dfb2b1$var$onCloseModal","currentTarget","filmsWatched","filmsQueque","parseWatchedFilms","parseQueQueFilms","$5274909fd9dfb2b1$var$backListFromStorages","removeEventListener","removeWatchedBtnListener","removeQueuedBtnListener","$gaiPd","loadWatchedFilms","code"],"version":3,"file":"library.7bfdc3aa.js.map"}