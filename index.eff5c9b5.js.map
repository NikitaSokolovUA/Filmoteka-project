{"mappings":"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","sources":["src/js/modal.js","src/templates/renderModalCard.js"],"sourcesContent":["import FilmsLoadService from './films-request';\nimport renderModalCard from '../templates/renderModalCard';\nimport {\n  addWatchedBtnListener,\n  removeWatchedBtnListener,\n} from './watched-list';\n\n// імпорт для кнопки add to queue\nimport { addQueuedBtnListener, removeQueuedBtnListener } from './queued-list';\n\nconst refs = {\n  modal: document.querySelector('[data-modal]'),\n  closeModalBtn: document.querySelector('[data-modal-close]'),\n  listOfFilm: document.querySelector('.film__list'),\n  card: document.querySelector('.modal__container'),\n  body: document.querySelector('body'),\n};\n\nrefs.listOfFilm.addEventListener('click', onClickFilm);\nrefs.closeModalBtn.addEventListener('click', onCloseModal);\nrefs.modal.addEventListener('click', onClickBackdropModalClose);\n\nasync function onClickFilm(e) {\n  try {\n    const chosenFilm = e.target.parentNode.parentNode;\n\n  const fls = new FilmsLoadService();\n  fls.id = chosenFilm.id;\n  const data = await fls.requestFilmDetails();\n\n  if (chosenFilm.nodeName !== 'LI') {\n    return;\n  }\n\n  refs.card.innerHTML = renderModalCard(data);\n    onOpenModal();\n  }\n  catch (err) {\n    console.error('Set state error: ', err.message);\n    Notiflix.Notify.failure('Sorry some problems on Server');\n  }\n}\n\nfunction onOpenModal() {\n  window.addEventListener('keydown', inKeyDownEscModalClose);\n  refs.modal.classList.toggle('backdrop--is-hidden');\n  refs.body.classList.toggle('modal-open');\n  addWatchedBtnListener();\n  addQueuedBtnListener();\n}\n\nfunction onCloseModal() {\n  window.removeEventListener('keydown', inKeyDownEscModalClose);\n  refs.modal.classList.toggle('backdrop--is-hidden');\n  refs.body.classList.toggle('modal-open');\n  removeWatchedBtnListener();\n  removeQueuedBtnListener();\n}\n\nfunction onClickBackdropModalClose(event) {\n  if (event.target === event.currentTarget) {\n    onCloseModal();\n  }\n}\n\nfunction inKeyDownEscModalClose(event) {\n  const KEY_CODE_ESCAPE = 'Escape';\n\n  if (event.code === KEY_CODE_ESCAPE) {\n    onCloseModal();\n  }\n}\n","import { isMovieOnList } from '../js/watched-list';\nimport {isMovieOnListQue} from '../js/queued-list'\nconst BASE_URL = 'https://image.tmdb.org/t/p/w500';\n\nexport default function renderModalCard(film, dataAtribute) {\n  const {\n    id,\n    genres,\n    vote_average,\n    vote_count,\n    poster_path,\n    popularity,\n    original_title,\n    overview,\n    title,\n  } = film;\n\n  let watchedBtnText;\n  const watchedBtnAction = isMovieOnList(id);\n  watchedBtnAction === 'add'\n    ? (watchedBtnText = 'add to Watched')\n    : (watchedBtnText = 'delete from watched');\n  \n  let queueBtnText;\n  const queueBtnAction = isMovieOnListQue(id);\n  queueBtnAction === 'add'\n    ? (queueBtnText = 'add to Queued')\n    : (queueBtnText = 'delete from Queued');\n  \n  \n\n  let poster = '';\n  if (poster_path === null) {\n    poster =  `src = \"https://upload.wikimedia.org/wikipedia/commons/4/43/Illustration_of_an_image.png\"`\n    } else poster = `src =\"${BASE_URL}${poster_path}\"`  \n  \n  return `<div class=\"modal__image-container\" id='${id} data='${dataAtribute}'>\n        <img\n          class=\"modal__image\"\n          ${poster}\n          alt=\"Poster ${title}\"\n        />\n      </div>\n    <div class=\"film__info\">\n        <h2 class=\"film__title\">${addAudit(title)}</h2>\n        <ul class=\"film-modal__list\">\n          <li class=\"film__item\">\n            <p class=\"film__details\">Vote / Votes</p>\n            <p class=\"film__value\">\n              <span class=\"film__rating--orange\">${addAudit(\n                vote_average.toFixed(1)\n              )}</span>\n              <span class=\"film__rating--slash\"> / </span>\n              <span class=\"vote-count\">${addAudit(vote_count)}</span>\n            </p>\n          </li>\n          <li class=\"film__item\">\n            <p class=\"film__details\">Popularity</p>\n            <p class=\"film__value\">${addAudit(popularity.toFixed(1))}</p>\n          </li>\n          <li class=\"film__item\">\n            <p class=\"film__details\">Original title</p>\n            <p class=\"film__value\">${addAudit(original_title)}</p>\n          </li>\n          <li class=\"film__item\">\n            <p class=\"film__details\">Genre</p>\n            <p class=\"film__value\">${addAudit(ganresString(genres))}</p>\n          </li>\n        </ul>\n        <div class=\"film-about__wrapper\">\n          <h3 class=\"film-about__title\">About</h3>\n          <div class=\"film-about-text__wrapper\">\n            <p class=\"film-about__text\">\n            ${addAudit(overview)}\n            </p>\n          </div>\n          <div class=\"film-btn__wrapper\">\n            <button class=\"film-button add-watchedbtn-js\" type=\"button\" data-id=\"${id}\" data-action=\"${watchedBtnAction}\" >${watchedBtnText}</button>\n            <button class=\"film-button add-queuedbtn-js\" type=\"button\" data-id=\"${id}\" data-action=\"${queueBtnAction}\" >${queueBtnText}</button>\n          </div>\n        </div>`;\n}\n\nfunction ganresString(id) {\n  return id.map(({ name }) => name).join(', ');\n}\n\nfunction addAudit(string) {\n  if (string.length === 0) {\n    return 'no_info';\n  }\n  return string;\n}\n\n"],"names":["$bpxeT","parcelRequire","$1fiGW","$a31f210fbab52dd8$export$2e2bcd8739ae039","film","dataAtribute","watchedBtnText","queueBtnText","id","genres","vote_average","vote_count","poster_path","popularity","original_title","overview","title","watchedBtnAction","isMovieOnList","queueBtnAction","$1JUWh","isMovieOnListQue","poster","concat","$a31f210fbab52dd8$var$addAudit","toFixed","map","param","name","join","$a31f210fbab52dd8$var$ganresString","string","length","$40873ecf3c18e122$var$refs","modal","document","querySelector","closeModalBtn","listOfFilm","card","body","$40873ecf3c18e122$var$_onClickFilm","$parcel$interopDefault","$2TvXO","mark","_callee","e","chosenFilm","fls","data","target","parentNode","$3kV53","default","requestFilmDetails","_ctx","sent","nodeName","innerHTML","$40873ecf3c18e122$var$onOpenModal","console","error","t0","message","Notiflix","Notify","failure","apply","this","arguments","window","addEventListener","$40873ecf3c18e122$var$inKeyDownEscModalClose","classList","toggle","addWatchedBtnListener","addQueuedBtnListener","$40873ecf3c18e122$var$onCloseModal","removeEventListener","removeWatchedBtnListener","removeQueuedBtnListener","event","code","currentTarget"],"version":3,"file":"index.eff5c9b5.js.map"}