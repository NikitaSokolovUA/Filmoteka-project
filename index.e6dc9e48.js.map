{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,iEAKMC,EAAaC,SAASC,eAAe,eACrCC,EAAQF,SAASG,cAAc,eAC/BC,EAAcJ,SAASG,cAAc,YACrCE,EAAc,IAAI,EAAAC,EAAAC,S,SAKTC,I,OAAAA,EAAfC,EAAAZ,EAAA,CAAAY,EAAAC,GAAAC,MAAA,SAAAC,EAAwBC,G,IAEhBC,EAgBAC,E,qEAjBNF,EAAMG,iBACAF,EAAiBT,EAAYY,MACnCZ,EAAYY,MAAQJ,EAAMK,cAAcC,SAASC,YAAYC,MAC7DhB,EAAYiB,YAEc,KAAtBjB,EAAYY,MAAY,C,uBAC1BZ,EAAYY,MAAQH,EACpBL,EAAAc,GAASC,OAAOC,KAAK,+CACrBrB,EAAYsB,UAAY,GACxBC,EACE,2EACAvB,EACA,I,4CAKwBC,EAAYuB,e,WAAlCb,EAAac,EAAAC,K,UAEmB,IAAhCf,EAAcgB,cAAmB,C,uBACnC1B,EAAYY,MAAQH,EACpBL,EAAAc,GAASC,OAAOQ,QAAQ,yCACxB5B,EAAYsB,UAAY,GACxBC,EACE,2EACAvB,EACA,I,2BAKAW,EAAcgB,cAAgB,IAChC3B,EAAYsB,UAAY,GACxBjB,EAAAc,GAASC,OAAOS,QACd,6BAAyDC,OAA5BnB,EAAcgB,cAAc,YAE3DhC,EAAWqB,YAAYC,MAAQ,GAC/Bc,IAGkB,IAAI,EAAAC,EAAA7B,SACpBF,EACAU,EAAcgB,eAENM,WAAWC,GAAG,YAAaC,IAGrC,EAAAC,EAAAjC,SAAeQ,EAAc0B,U,mDAG/BC,QAAQC,IAAId,EAAAe,GAAMC,S,4DAnDCC,MAAAC,KAAAC,U,CAwDvB,SAASb,IACPjC,EAAMwB,UAAY,E,UAILa,EAAa1B,G,OAAboC,EAAYH,MAAAC,KAAAC,U,UAAZC,I,OAAAA,EAAfxC,EAAAZ,EAAA,CAAAY,EAAAC,GAAAC,MAAA,SAAAC,EAA4BC,G,IACpBqC,EAGAC,E,yEAHAD,EAAcrC,EAAMuC,KAC1B/C,EAAY+C,KAAOF,EACnBf,I,SACuB9B,EAAYuB,e,OAA7BuB,EAAQtB,EAAAC,MACd,EAAAU,EAAAjC,SAAe4C,EAASV,S,4CALCK,MAAAC,KAAAC,U,CAS3B,SAASrB,EAAU0B,EAAMC,EAAMC,GACzBF,EAAKG,OAAS,IAChBF,EAAK5B,WAAa2B,EAAK,GACvBI,YAAW,WACT9B,EAAU0B,EAAKK,MAAM,GAAIJ,EAAMC,E,GAC9BA,G,CA9EPxD,EAAW4D,iBAAiB,U,SAGJ9C,G,OAATL,EAAQsC,MAAAC,KAAAC,U","sources":["src/js/search.js"],"sourcesContent":["import FilmsLoadService from './films-request';\nimport Notiflix from 'notiflix';\nimport renderFilmCard from './renderCard';\nimport FilmsPagination from './pagination';\n\nconst searchForm = document.getElementById('search-form');\nconst films = document.querySelector('.film__list');\nconst warningText = document.querySelector('.warning');\nconst filmsSearch = new FilmsLoadService();\n\nsearchForm.addEventListener('submit', onSearch);\n\n//************Function onSearch****************/////\nasync function onSearch(event) {\n  event.preventDefault();\n  const oldSearchQuery = filmsSearch.query;\n  filmsSearch.query = event.currentTarget.elements.searchQuery.value;\n  filmsSearch.resetPage();\n\n  if (filmsSearch.query === '') {\n    filmsSearch.query = oldSearchQuery;\n    Notiflix.Notify.info('&#128519 Please, complete the search field!');\n    warningText.innerHTML = '';\n    printText(\n      'Search result not successful. Enter the correct movie name and try again',\n      warningText,\n      40\n    );\n    return;\n  }\n\n  const filmsResponse = await filmsSearch.requestFilms();\n  try {\n    if (filmsResponse.total_results === 0) {\n      filmsSearch.query = oldSearchQuery;\n      Notiflix.Notify.failure('&#128561 Оh my god, what do you want?');\n      warningText.innerHTML = '';\n      printText(\n        'Search result not successful. Enter the correct movie name and try again',\n        warningText,\n        40\n      );\n      return;\n    }\n\n    if (filmsResponse.total_results > 0) {\n      warningText.innerHTML = '';\n      Notiflix.Notify.success(\n        `Cool!&#128526 You can see ${filmsResponse.total_results} films!`\n      );\n      searchForm.searchQuery.value = '';\n      clearFilms();\n\n      //************Пагинация************\n      const paginator = new FilmsPagination(\n        filmsSearch,\n        filmsResponse.total_results\n      );\n      paginator.pagination.on('afterMove', paginatePage);\n      //************\n\n      renderFilmCard(filmsResponse.results);\n    }\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\n//************Function clearFilms****************/////\nfunction clearFilms() {\n  films.innerHTML = '';\n}\n\n//************Function paginatePage****************/////\nasync function paginatePage(event) {\n  const currentPage = event.page;\n  filmsSearch.page = currentPage;\n  clearFilms();\n  const responce = await filmsSearch.requestFilms();\n  renderFilmCard(responce.results);\n}\n\n//************Function printText-самопечатающийся текст****************/////\nfunction printText(text, elem, delay) {\n  if (text.length > 0) {\n    elem.innerHTML += text[0];\n    setTimeout(function () {\n      printText(text.slice(1), elem, delay);\n    }, delay);\n  }\n}\n"],"names":["$bpxeT","parcelRequire","$d35904b1c7f1c41e$var$searchForm","document","getElementById","$d35904b1c7f1c41e$var$films","querySelector","$d35904b1c7f1c41e$var$warningText","$d35904b1c7f1c41e$var$filmsSearch","$3kV53","default","$d35904b1c7f1c41e$var$_onSearch","$parcel$interopDefault","$2TvXO","mark","_callee","event","oldSearchQuery","filmsResponse","preventDefault","query","currentTarget","elements","searchQuery","value","resetPage","$iU1Pc","Notify","info","innerHTML","$d35904b1c7f1c41e$var$printText","requestFilms","_ctx","sent","total_results","failure","success","concat","$d35904b1c7f1c41e$var$clearFilms","$jcFG7","pagination","on","$d35904b1c7f1c41e$var$paginatePage","$5I0aQ","results","console","log","t0","message","apply","this","arguments","$d35904b1c7f1c41e$var$_paginatePage","currentPage","responce","page","text","elem","delay","length","setTimeout","slice","addEventListener"],"version":3,"file":"index.e6dc9e48.js.map"}